{"version":3,"file":"ngx-quill-lite.umd.js","sources":["../../../projects/ngx-quill-lite/src/lib/quill-editor.service.ts","../../../projects/ngx-quill-lite/src/lib/quill-editor/quill-editor.component.ts","../../../projects/ngx-quill-lite/src/lib/ngx-quill-lite.module.ts","../../../projects/ngx-quill-lite/src/public-api.ts","../../../projects/ngx-quill-lite/src/ngx-quill-lite.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { ReplaySubject, Observable, forkJoin } from 'rxjs';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class QuillEditorService {\r\n  private _loadedLibraries: { [url: string]: ReplaySubject<any> } = {};\r\n  quilljs: any;\r\n\r\n  constructor(@Inject(DOCUMENT) private readonly document: any) {}\r\n\r\n  lazyLoadQuill(): Observable<any> {\r\n    return forkJoin([\r\n      this.loadScript('assets/quill/quill.min.js'),\r\n      this.loadStyle('assets/quill/quill.snow.css')\r\n    ]);\r\n  }\r\n\r\n  private loadScript(url: string): Observable<any> {\r\n    if (this._loadedLibraries[url]) {\r\n      return this._loadedLibraries[url].asObservable();\r\n    }\r\n\r\n    this._loadedLibraries[url] = new ReplaySubject();\r\n\r\n    const script = this.document.createElement('script');\r\n    script.type = 'text/javascript';\r\n    script.async = true;\r\n    script.src = url;\r\n    script.onload = () => {\r\n      this._loadedLibraries[url].next();\r\n      this._loadedLibraries[url].complete();\r\n    };\r\n\r\n    this.document.body.appendChild(script);\r\n\r\n    return this._loadedLibraries[url].asObservable();\r\n  }\r\n\r\n  private loadStyle(url: string): Observable<any> {\r\n    if (this._loadedLibraries[url]) {\r\n      return this._loadedLibraries[url].asObservable();\r\n    }\r\n\r\n    this._loadedLibraries[url] = new ReplaySubject();\r\n\r\n    const style = this.document.createElement('link');\r\n    style.type = 'text/css';\r\n    style.href = url;\r\n    style.rel = 'stylesheet';\r\n    style.onload = () => {\r\n      this._loadedLibraries[url].next();\r\n      this._loadedLibraries[url].complete();\r\n    };\r\n\r\n    const head = document.getElementsByTagName('head')[0];\r\n    head.appendChild(style);\r\n\r\n    return this._loadedLibraries[url].asObservable();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ElementRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnDestroy,\r\n  NgZone,\r\n  Inject\r\n} from '@angular/core';\r\nimport { QuillEditorService } from '../quill-editor.service';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\ndeclare var Quill: any;\r\n\r\n@Component({\r\n  selector: 'quill-editor',\r\n  templateUrl: './quill-editor.component.html',\r\n  styleUrls: ['./quill-editor.component.css']\r\n})\r\nexport class QuillEditorComponent implements OnInit, OnDestroy {\r\n  @Input() html = '';\r\n  @Output() htmlChange = new EventEmitter<string>();\r\n  quillEditor: any;\r\n  private textChangeEvent: any;\r\n  showEditor = false;\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private zone: NgZone,\r\n    private readonly svc: QuillEditorService,\r\n    @Inject(DOCUMENT) private readonly document: any\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.svc.lazyLoadQuill().subscribe(_ => {\r\n      if (!Quill) {\r\n        Quill = this.document.defaultView.Quill;\r\n      }\r\n      this.setupQuill();\r\n    });\r\n  }\r\n\r\n  setupQuill() {\r\n    if (!Quill) {\r\n      return;\r\n    }\r\n    // use generic align styles\r\n    const align = Quill.import('attributors/style/align');\r\n    align.whitelist = ['right', 'center', 'justify'];\r\n    Quill.register(align, true);\r\n\r\n    const toolbarElem = this.elementRef.nativeElement.querySelector(\r\n      '[quill-editor-toolbar]'\r\n    );\r\n    const editorElem = this.elementRef.nativeElement.querySelector(\r\n      '[quill-editor-container]'\r\n    );\r\n    this.quillEditor = new Quill(editorElem, {\r\n      format: 'html',\r\n      theme: 'snow',\r\n      modules: {\r\n        toolbar: toolbarElem\r\n      }\r\n    });\r\n\r\n    const contents = this.quillEditor.clipboard.convert(this.html);\r\n    this.quillEditor.setContents(contents, 'silent');\r\n    this.quillEditor.history.clear();\r\n\r\n    this.textChangeEvent = this.quillEditor.on(\r\n      'text-change',\r\n      (delta: any, oldDelta: any, source: string): void => {\r\n        if (source === 'user') {\r\n          let html: string | null = this.quillEditor.root.innerHTML;\r\n          if (html === '<p><br></p>' || html === '<div><br><div>') {\r\n            html = null;\r\n          }\r\n          this.zone.run(() => {\r\n            this.htmlChange.emit(html);\r\n          });\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.textChangeEvent) {\r\n      this.textChangeEvent.removeListener('text-change');\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { QuillEditorComponent } from './quill-editor/quill-editor.component';\r\n\r\n@NgModule({\r\n  declarations: [QuillEditorComponent],\r\n  imports: [CommonModule, FormsModule],\r\n  exports: [QuillEditorComponent]\r\n})\r\nexport class NgxQuillLite {}\r\n","/*\n * Public API Surface of ngx-quill-lite\n */\n\nexport * from './lib/quill-editor.service';\nexport * from './lib/quill-editor/quill-editor.component';\nexport * from './lib/ngx-quill-lite.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["forkJoin","ReplaySubject","Injectable","Inject","DOCUMENT","EventEmitter","Component","ElementRef","NgZone","Input","Output","NgModule","CommonModule","FormsModule"],"mappings":"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"}