{"version":3,"file":"ngx-quill-lite.js","sources":["../../../projects/ngx-quill-lite/src/lib/quill-editor.service.ts","../../../projects/ngx-quill-lite/src/lib/quill-editor/quill-editor.component.ts","../../../projects/ngx-quill-lite/src/lib/ngx-quill-lite.module.ts","../../../projects/ngx-quill-lite/src/public-api.ts","../../../projects/ngx-quill-lite/src/ngx-quill-lite.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { ReplaySubject, Observable, forkJoin } from 'rxjs';\nimport { DOCUMENT } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class QuillEditorService {\n  private _loadedLibraries: { [url: string]: ReplaySubject<any> } = {};\n  quilljs: any;\n\n  constructor(@Inject(DOCUMENT) private readonly document: any) {}\n\n  lazyLoadQuill(): Observable<any> {\n    return forkJoin([\n      this.loadScript('assets/quill/quill.min.js'),\n      this.loadStyle('assets/quill/quill.snow.css')\n    ]);\n  }\n\n  private loadScript(url: string): Observable<any> {\n    if (this._loadedLibraries[url]) {\n      return this._loadedLibraries[url].asObservable();\n    }\n\n    this._loadedLibraries[url] = new ReplaySubject();\n\n    const script = this.document.createElement('script');\n    script.type = 'text/javascript';\n    script.async = true;\n    script.src = url;\n    script.onload = () => {\n      this._loadedLibraries[url].next();\n      this._loadedLibraries[url].complete();\n    };\n\n    this.document.body.appendChild(script);\n\n    return this._loadedLibraries[url].asObservable();\n  }\n\n  private loadStyle(url: string): Observable<any> {\n    if (this._loadedLibraries[url]) {\n      return this._loadedLibraries[url].asObservable();\n    }\n\n    this._loadedLibraries[url] = new ReplaySubject();\n\n    const style = this.document.createElement('link');\n    style.type = 'text/css';\n    style.href = url;\n    style.rel = 'stylesheet';\n    style.onload = () => {\n      this._loadedLibraries[url].next();\n      this._loadedLibraries[url].complete();\n    };\n\n    const head = document.getElementsByTagName('head')[0];\n    head.appendChild(style);\n\n    return this._loadedLibraries[url].asObservable();\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Component, ElementRef, EventEmitter, Inject, Input, NgZone, OnDestroy, OnInit, Output } from '@angular/core';\n\nimport { QuillEditorService } from '../quill-editor.service';\n\ndeclare var Quill: any;\n\n@Component({\n  selector: 'quill-editor',\n  templateUrl: './quill-editor.component.html',\n  styleUrls: ['./quill-editor.component.css']\n})\nexport class QuillEditorComponent implements OnInit, OnDestroy {\n  @Input() html = '';\n  @Output() htmlChange = new EventEmitter<string>();\n  quillEditor: any;\n  private textChangeEvent: any;\n  showEditor = false;\n\n  constructor(\n    private elementRef: ElementRef,\n    private zone: NgZone,\n    private readonly svc: QuillEditorService,\n    @Inject(DOCUMENT) private readonly document: any\n  ) {}\n\n  ngOnInit() {\n    this.svc.lazyLoadQuill().subscribe(_ => {\n      if (!Quill) {\n        Quill = this.document.defaultView.Quill;\n      }\n      this.setupQuill();\n    });\n  }\n\n  setupQuill() {\n    if (!Quill) {\n      return;\n    }\n    // use generic align styles\n    // const align = Quill.import('attributors/style/align');\n    // align.whitelist = ['right', 'center', 'justify'];\n    // Quill.register(align, true);\n\n    const toolbarElem = this.elementRef.nativeElement.querySelector(\n      '[quill-editor-toolbar]'\n    );\n    const editorElem = this.elementRef.nativeElement.querySelector(\n      '[quill-editor-container]'\n    );\n    this.quillEditor = new Quill(editorElem, {\n      format: 'html',\n      theme: 'snow',\n      modules: {\n        toolbar: toolbarElem\n      }\n    });\n\n    const contents = this.quillEditor.clipboard.convert(this.html);\n    this.quillEditor.setContents(contents, 'silent');\n    this.quillEditor.history.clear();\n\n    this.textChangeEvent = this.quillEditor.on(\n      'text-change',\n      (delta: any, oldDelta: any, source: string): void => {\n        if (source === 'user') {\n          let html: string | null = this.quillEditor.root.innerHTML;\n          if (html === '<p><br></p>' || html === '<div><br><div>') {\n            html = null;\n          }\n          this.zone.run(() => {\n            this.htmlChange.emit(html);\n          });\n        }\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.textChangeEvent) {\n      this.textChangeEvent.removeListener('text-change');\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { QuillEditorComponent } from './quill-editor/quill-editor.component';\n\n@NgModule({\n  declarations: [QuillEditorComponent],\n  imports: [CommonModule, FormsModule],\n  exports: [QuillEditorComponent]\n})\nexport class NgxQuillLite {}\n","/*\n * Public API Surface of ngx-quill-lite\n */\n\nexport * from './lib/quill-editor.service';\nexport * from './lib/quill-editor/quill-editor.component';\nexport * from './lib/ngx-quill-lite.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}